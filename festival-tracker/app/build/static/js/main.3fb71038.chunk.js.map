{"version":3,"sources":["shared/images/osheaga.png","containers/DepartureTrackerContainer/DepartureTrackerContainer.module.sass","components/Departure/Departure.module.sass","axios-instance.js","components/Departure/Departure.js","components/Loading/Loading.js","containers/DepartureTrackerContainer/DepartureTrackerContainer.js","hoc/Toolbar/Toolbar.js","hoc/Layout/Layout.js","App.js","i18n.js","index.js","hoc/Toolbar/Toolbar.module.sass","hoc/Layout/Layout.module.sass","components/Loading/Loading.module.sass"],"names":["module","exports","instance","axios","create","baseURL","headers","Accept","Departure","departure","operators","locations","t","useTranslation","operator","find","o","id","operator_id","locationDeparture","location","trip_stops","location_id","locationArrival","length","className","classes","Operator","href","url","src","logo_url","alt","Locations","key","Location","departure_time","LocationName","name","LocationAddress","address","join","arrival_time","TripItems","map","tripStop","i","TripItem","TripItemHour","substring","TripItemLocation","prices","total","toFixed","currency","Loading","size","optionsCities","value","label","optionsCurrency","optionsCountry","DepartureTracker","useState","loading","changeLoading","departures","changeDepartures","changeOperators","changeLocations","origin","changeOrigin","destination","changeDestination","adult","changeAdult","child","changeChild","senior","changeSenior","pollIndex","changePollIndex","changeCompleteStatus","changeCurrency","country","changeCountry","currentDate","Date","toISOString","date","changeDate","pollSearch","newPollIndex","get","params","child_ages","repeat","slice","senior_ages","lang","index","then","res","data","complete","setTimeout","catch","err","console","log","departuresBlocks","departuresBlocksRendered","DepartureBlocks","Instructions","Container","Form","FormGroup","FormItem","defaultValue","moment","onChange","options","object","placeholder","min","max","SearchButton","onClick","type","icon","SearchOutlined","Departures","NavigationButtons","NavigationButton","disabled","Toolbar","i18n","LogoContainer","Logo","logoOsheaga","ButtonEnglish","language","Active","changeLanguage","ButtonFrench","Layout","children","Content","App","resources","en","translation","fr","use","initReactI18next","init","lng","fallbackLng","keySeparator","interpolation","escapeValue","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3fb71038.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/osheaga.81e1a223.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Instructions\":\"DepartureTrackerContainer_Instructions__QQ0I4\",\"Container\":\"DepartureTrackerContainer_Container__hVkG0\",\"Form\":\"DepartureTrackerContainer_Form__2WSUA\",\"SearchButton\":\"DepartureTrackerContainer_SearchButton__3kCSp\",\"FormGroup\":\"DepartureTrackerContainer_FormGroup__38495\",\"FormItem\":\"DepartureTrackerContainer_FormItem__1yLix\",\"Departures\":\"DepartureTrackerContainer_Departures__pgFkz\",\"NavigationButtons\":\"DepartureTrackerContainer_NavigationButtons__3QyoY\",\"NavigationButton\":\"DepartureTrackerContainer_NavigationButton__3Zst9\",\"DepartureBlocks\":\"DepartureTrackerContainer_DepartureBlocks__3tbi1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Departure\":\"Departure_Departure__20R5T\",\"TripItems\":\"Departure_TripItems__35B5t\",\"TripItem\":\"Departure_TripItem__FRRl7\",\"TripItemHour\":\"Departure_TripItemHour__29QRg\"};","import axios from 'axios'\r\n\r\n/**\r\n * Instance of axios to be imported elsewhere.\r\n *\r\n * By having a global instance declared at one place, we can use a .env file\r\n * to replace some secret headers variables and change our baseURL easily.\r\n */\r\nconst instance = axios.create({\r\n  baseURL: 'https://napi.busbud.com/',\r\n  headers: {\r\n    // 'Content-Type': 'application/json',\r\n    Accept: 'application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/',\r\n    'X-Busbud-Token': 'PARTNER_BaASYYHxTxuOINEOMWq5GA'\r\n  }\r\n})\r\n\r\nexport default instance\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport classes from './Departure.module.sass'\r\n\r\nconst Departure = ({ departure, operators, locations }) => {\r\n  const { t } = useTranslation()\r\n  const operator = operators.find(o => o.id === departure.operator_id)\r\n  const locationDeparture = locations.find(location => location.id === departure.trip_stops[0].location_id)\r\n  const locationArrival = locations.find(location => location.id === departure.trip_stops[departure.trip_stops.length - 1].location_id)\r\n  return (\r\n    <div className={classes.Departure}>\r\n      <div className={classes.Operator}>\r\n        <a href={operator.url}><img src={operator.logo_url} alt='Operator logo' /></a>\r\n      </div>\r\n      <div>\r\n        <div className={classes.Locations}>\r\n          {t('Departure')}:\r\n          <div key={`departure-${departure.id}-location-departure`} className={classes.Location}>\r\n            <div>{departure.departure_time}</div>\r\n            <div className={classes.LocationName}>{locationDeparture.name}</div>\r\n            <div className={classes.LocationAddress}>{locationDeparture.address.join(',')}</div>\r\n          </div>\r\n          <br />\r\n          {t('Arrival')}:\r\n          <div key={`departure-${departure.id}-location-arrival`} className={classes.Location}>\r\n            <div>{departure.arrival_time}</div>\r\n            <div className={classes.LocationName}>{locationArrival.name}</div>\r\n            <div className={classes.LocationAddress}>{locationArrival.address.join(',')}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div>\r\n        {t('Trip')}:\r\n        <div className={classes.TripItems}>\r\n          {departure.trip_stops.map((tripStop, i) => {\r\n            return (\r\n              <div className={classes.TripItem} key={`departure-${departure.id}-trip-${i}`}>\r\n                <div className={classes.TripItemHour}>\r\n                  {tripStop.departure_time\r\n                    ? tripStop.departure_time?.substring(11, 19)\r\n                    : tripStop.arrival_time?.substring(11, 19)}\r\n                </div>\r\n                <div className={classes.TripItemLocation}>{tripStop.name}</div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n      <div>{t('Price')}: {(departure.prices?.total / 100).toFixed(2)}$ {departure.prices?.currency}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Departure\r\n","import React from 'react'\r\nimport { Spin } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport classes from './Loading.module.sass'\r\n\r\nconst Loading = () => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <div className={classes.Loading}>\r\n      <div>{t('Loading...')}</div>\r\n      <Spin size='large' />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading\r\n","import React, { useState } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport Dropdown from 'react-dropdown'\r\nimport moment from 'moment'\r\nimport axios from '../../axios-instance'\r\nimport { Button, DatePicker, InputNumber } from 'antd'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\n\r\nimport Departure from '../../components/Departure/Departure'\r\nimport Loading from '../../components/Loading/Loading'\r\n\r\nimport classes from './DepartureTrackerContainer.module.sass'\r\n\r\nconst geohashMtl = 'f25dvk'\r\n// const geohashNY = 'dr5reg'\r\nconst geohashQC = 'f2m673'\r\n\r\nconst optionsCities = [\r\n  { value: 'f25dvk', label: 'Montreal' },\r\n  { value: 'dr5reg', label: 'New York' },\r\n  { value: 'f2m673', label: 'Quebec' }\r\n]\r\n\r\nconst optionsCurrency = [\r\n  { value: 'USD', label: 'US Dollard ($)' },\r\n  { value: 'CAD', label: 'Canadian Dollard ($)' }\r\n]\r\n\r\nconst optionsCountry = [\r\n  { value: 'US', label: 'United States' },\r\n  { value: 'CA', label: 'Canada' }\r\n]\r\n\r\nconst DepartureTracker = () => {\r\n  const { t } = useTranslation()\r\n  const [loading, changeLoading] = useState(false)\r\n  const [departures, changeDepartures] = useState([])\r\n  const [operators, changeOperators] = useState([])\r\n  const [locations, changeLocations] = useState([])\r\n  const [origin, changeOrigin] = useState(geohashQC)\r\n  const [destination, changeDestination] = useState(geohashMtl)\r\n  const [adult, changeAdult] = useState(1)\r\n  const [child, changeChild] = useState(0)\r\n  const [senior, changeSenior] = useState(0)\r\n  const [pollIndex, changePollIndex] = useState(0)\r\n  const [completeStatus, changeCompleteStatus] = useState(true)\r\n  // ISO 4217 currency code\r\n  const [currency, changeCurrency] = useState('CAD')\r\n  // ISO 3166-1 alpha-2 language code\r\n  const [country, changeCountry] = useState('CA')\r\n  const now = new Date()\r\n  const currentDate = now.toISOString().substring(0, 10)\r\n  const [date, changeDate] = useState(currentDate)\r\n\r\n  // /**\r\n  //  * Poll search will change when next page of departures is requested\r\n  //  */\r\n  // useEffect(() => {\r\n  //   pollSearch()\r\n  // }, [pollIndex])\r\n\r\n  /**\r\n   * Launch a new search of bus departures with current settings\r\n   */\r\n  const launchSearch = () => {\r\n    changeLoading(true)\r\n    changeCompleteStatus(true)\r\n    axios.get(`/x-departures/${origin}/${destination}/${date}`, {\r\n      params: {\r\n        adult,\r\n        child,\r\n        child_ages: `${'10,'.repeat(child).slice(0, -1)}`,\r\n        senior,\r\n        senior_ages: `${'75,'.repeat(senior).slice(0, -1)}`,\r\n        lang: country,\r\n        currency\r\n      }\r\n    })\r\n      .then(res => {\r\n        pollSearch(0)\r\n      })\r\n      .catch(err => {\r\n        changeDepartures([])\r\n        changeLoading(false)\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  /**\r\n   * Poll the next 10 result from the current search (based on pollIndex)\r\n   * This function is automatically triggered when pollIndex change\r\n   */\r\n  const pollSearch = (newPollIndex) => {\r\n    changePollIndex(newPollIndex)\r\n    changeLoading(true)\r\n    axios.get(`/x-departures/${origin}/${destination}/${date}/poll`, {\r\n      params: {\r\n        adult,\r\n        child,\r\n        child_ages: `${'10,'.repeat(child).slice(0, -1)}`,\r\n        senior,\r\n        senior_ages: `${'75,'.repeat(senior).slice(0, -1)}`,\r\n        lang: country,\r\n        currency,\r\n        index: newPollIndex\r\n      }\r\n    })\r\n      .then(res => {\r\n        changeDepartures(res.data.departures)\r\n        changeOperators(res.data.operators)\r\n        changeLocations(res.data.locations)\r\n        changeCompleteStatus(res.data.complete)\r\n        if (!res.data.complete) {\r\n          changeLoading(true)\r\n          setTimeout(() => {\r\n            pollSearch(newPollIndex)\r\n          }, 2000)\r\n        } else {\r\n          changeLoading(false)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        changeLoading(false)\r\n        changeDepartures([])\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  let departuresBlocks = <Loading />\r\n  // If the departures are found, we render them in blocks\r\n  if (!loading) {\r\n    let departuresBlocksRendered = <div>{t('No departures found')}</div>\r\n    if (departures.length) {\r\n      departuresBlocksRendered = departures.map((departure, i) => {\r\n        return <Departure key={`departure-${i}`} departure={departure} operators={operators} locations={locations} />\r\n      })\r\n    }\r\n    departuresBlocks = (\r\n      <div className={classes.DepartureBlocks}>\r\n        {departuresBlocksRendered}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.Instructions}>{t('Find the best bus ticket to your destination !')}</div>\r\n      <div className={classes.Container}>\r\n        <div className={classes.Form}>\r\n          <div className={classes.FormGroup}>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Date')}</div>\r\n              <DatePicker\r\n                defaultValue={moment(date)} onChange={(value) => {\r\n                  changeDate(value?.toISOString().substring(0, 10))\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className={classes.FormGroup}>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Origin')}</div>\r\n              <Dropdown options={optionsCities} onChange={(object) => changeOrigin(object.value)} value={origin} placeholder={t('Select an origin')} />\r\n            </div>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Destination')}</div>\r\n              <Dropdown options={optionsCities} onChange={(object) => changeDestination(object.value)} value={destination} placeholder={t('Select a destination')} />\r\n            </div>\r\n          </div>\r\n          <div className={classes.FormGroup}>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Adult')}</div>\r\n              <InputNumber min={0} max={99} defaultValue={adult} onChange={(value) => changeAdult(value)} />\r\n            </div>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Child')}</div>\r\n              <InputNumber min={0} max={99} defaultValue={child} onChange={(value) => changeChild(value)} />\r\n            </div>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Senior (65+)')}</div>\r\n              <InputNumber min={0} max={99} defaultValue={senior} onChange={(value) => changeSenior(value)} />\r\n            </div>\r\n          </div>\r\n          <div className={classes.FormGroup}>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Country')}</div>\r\n              <Dropdown options={optionsCountry} onChange={(object) => changeCountry(object.value)} value={country} placeholder={t('Select a country')} />\r\n            </div>\r\n            <div className={classes.FormItem}>\r\n              <div>{t('Currency')}</div>\r\n              <Dropdown options={optionsCurrency} onChange={(object) => changeCurrency(object.value)} value={currency} placeholder={t('Select a currency')} />\r\n            </div>\r\n          </div>\r\n          <Button className={classes.SearchButton} onClick={() => launchSearch()} type='primary' icon={<SearchOutlined />}>\r\n            {t('Search')}\r\n          </Button>\r\n        </div>\r\n        <div className={classes.Departures}>\r\n          {t('Results')} {pollIndex + 1} - {pollIndex + 10}\r\n          <div className={classes.NavigationButtons}>\r\n            <Button className={classes.NavigationButton} disabled={pollIndex === 0} onClick={() => pollSearch(pollIndex - 10 > 0 ? pollIndex - 10 : 0)} type='primary'>\r\n              {t('Previous')}\r\n            </Button>\r\n            <Button\r\n              className={classes.NavigationButton}\r\n              // Should be disabled by default but for testing purpose it is enabled\r\n              // disabled={completeStatus}\r\n              onClick={() => pollSearch(pollIndex + 10)}\r\n              type='primary'\r\n            >\r\n              {t('Next')}\r\n            </Button>\r\n          </div>\r\n          {departuresBlocks}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DepartureTracker\r\n","import React from 'react'\r\n\r\nimport classes from './Toolbar.module.sass'\r\nimport logoOsheaga from '../../shared/images/osheaga.png'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst Toolbar = () => {\r\n  const { i18n } = useTranslation()\r\n  return (\r\n    <header className={classes.Toolbar}>\r\n      <div className={classes.LogoContainer}>\r\n        <img className={classes.Logo} src={logoOsheaga} alt='Osheaga festival' />\r\n      </div>\r\n      <div\r\n        className={classes.ButtonEnglish + ' ' + (i18n.language === 'en' ? classes.Active : '')}\r\n        onClick={() => i18n.changeLanguage('en')}\r\n      >\r\n        <div>EN</div>\r\n      </div>\r\n      <div\r\n        className={classes.ButtonFrench + ' ' + (i18n.language === 'fr' ? classes.Active : '')}\r\n        onClick={() => i18n.changeLanguage('fr')}\r\n      >\r\n        <div>FR</div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Toolbar\r\n","import React from 'react'\r\nimport classes from './Layout.module.sass'\r\nimport Toolbar from '../Toolbar/Toolbar'\r\n\r\nconst Layout = ({ children }) => {\r\n  return (\r\n    <div className={classes.Layout}>\r\n      <Toolbar />\r\n      <div className={classes.Content}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Layout\r\n","import React from 'react'\nimport DepartureTracker from './containers/DepartureTrackerContainer/DepartureTrackerContainer'\nimport Layout from './hoc/Layout/Layout'\n\nfunction App () {\n  return (\n    <Layout>\n      <DepartureTracker />\n    </Layout>\n  )\n}\n\nexport default App\n","import i18n from 'i18next'\r\nimport { initReactI18next } from 'react-i18next'\r\nimport translationEn from './i18n/en.json'\r\nimport translationFr from './i18n/fr.json'\r\n\r\n// the translations\r\n// (tip move them in a JSON file and import them)\r\nconst resources = {\r\n  en: {\r\n    translation: translationEn\r\n  },\r\n  fr: {\r\n    translation: translationFr\r\n  }\r\n}\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    lng: 'en',\r\n    fallbackLng: 'fr',\r\n\r\n    keySeparator: false, // we do not use keys in form messages.welcome\r\n\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  })\r\n\r\nexport default i18n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport 'antd/dist/antd.css'\nimport 'react-dropdown/style.css'\nimport './i18n'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toolbar\":\"Toolbar_Toolbar__2AaWe\",\"LogoContainer\":\"Toolbar_LogoContainer__1OuBm\",\"Logo\":\"Toolbar_Logo__32SUz\",\"ButtonFrench\":\"Toolbar_ButtonFrench__1woqG\",\"ButtonEnglish\":\"Toolbar_ButtonEnglish__1GzgC\",\"Active\":\"Toolbar_Active__Eoez-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layout\":\"Layout_Layout__3UJIq\",\"Content\":\"Layout_Content__1sgz6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loading\":\"Loading_Loading__2wIjg\"};"],"sourceRoot":""}