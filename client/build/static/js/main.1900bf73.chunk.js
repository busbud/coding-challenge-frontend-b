(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var a,r=t(1),i=t.n(r),c=t(14),s=(t(25),t(5)),o=t(2),l=t(3),u=t(4),d=t(7),j=t(6),b=t(9),p=t(0),m=l.a.div(a||(a=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  min-height: 100px;\n  align-items: center;\n  padding: 0.5rem 2rem;\n  border: 0.07rem solid lightgray;\n  border-radius: 0.75rem;\n  margin-bottom: 2rem;\n  font-size: 1.2rem;\n  flex-wrap: wrap;\n\n  .routes {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    flex: 1;\n  }\n\n  .routes > div:not(:last-child) {\n    margin-bottom: 1rem;\n  }\n\n  .route {\n    display: flex;\n  }\n\n  .route > div:not(:last-child) {\n    margin-right: 2rem;\n  }\n\n  .time {\n    word-break: keep-all;\n  }\n\n  .price {\n    font-size: 1.5rem;\n  }\n\n  .price > span:not(:last-child) {\n    margin-right: 0.5rem;\n  }\n\n  @media (max-width: 900px) {\n    padding: 0.9rem;\n\n    .price {\n      font-size: 1.3rem;\n    }\n\n    .route {\n      flex-direction: column;\n    }\n  }\n\n  @media (max-width: 900px) {\n    .price {\n      font-size: 1.2rem;\n      margin-top: 1rem;\n    }\n  }\n"])));var v,g=function(e){return Object(p.jsxs)(m,{children:[Object(p.jsxs)("div",{className:"routes",children:[Object(p.jsxs)("div",{className:"route origin",children:[Object(p.jsx)("div",{className:"time",children:new Date(e.departureTime).toLocaleString(e.language)}),Object(p.jsx)("div",{children:e.originLocationName})]}),Object(p.jsxs)("div",{className:"route destination",children:[Object(p.jsx)("div",{className:"time",children:new Date(e.arrivalTime).toLocaleString(e.language)}),Object(p.jsx)("div",{children:e.destinationLocationName})]})]}),Object(p.jsxs)("div",{className:"price",children:[Object(p.jsx)("span",{children:e.prices.total}),Object(p.jsx)("span",{children:e.prices.currency})]})]})},h=l.a.div(v||(v=Object(o.a)(["\n  .title {\n    font-size: 2rem;\n    margin-bottom: 1rem;\n  }\n"])));var f,O=function(e){var n=Object(r.useState)([]),t=Object(u.a)(n,2),a=t[0],i=t[1];return Object(r.useEffect)((function(){var n;if(null!==(n=e.departures)&&void 0!==n&&n.length){var t={};e.locations.forEach((function(e){t[e.id]=e}));var a=e.departures.map((function(e){return e.destinationLocationName=t[e.destinationLocationId].name,e.originLocationName=t[e.originLocationId].name,e}));i(a)}}),[e.departures]),Object(p.jsxs)(h,{children:[Object(p.jsx)("div",{className:"title",children:e.t.resultList}),0===a.length?Object(p.jsx)("div",{children:"No result"}):a.map((function(e){return Object(p.jsx)(g,Object(s.a)({},e),e.id)}))]})},x=function(e){return e.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},y=function(e){var n=e.toLowerCase();return e.charAt(0).toUpperCase()+n.slice(1)},N=l.a.div(f||(f=Object(o.a)(["\n  display: block;\n  position: relative;\n\n  .label {\n    display: block;\n  }\n"])));var w,C,L,E,D=function(e){return Object(p.jsxs)(N,{className:e.className,children:[Object(p.jsx)("label",{className:"label",children:y(e.field)}),Object(p.jsx)("input",{name:"message",type:"text",onChange:function(n){e.handleChange(n,e.field)},value:e.value})]})},S="http://localhost:3001/";!function(e){e.EN="en",e.FR="fr",e.ES="es"}(w||(w={})),function(e){e.CAD="CAD",e.USD="USD",e.EUR="EUR"}(C||(C={})),function(e){e.ADULT="adult",e.CHILD="child",e.SENIOR="senior",e.LANG="lang",e.CURRENCY="currency"}(L||(L={}));var U=l.a.div(E||(E=Object(o.a)(["\n  position: relative;\n  padding: 10px;\n\n  .form {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    margin-bottom: 1rem;\n  }\n\n  .field {\n    border: 1px solid lightgray;\n    padding: 0.25rem 0.5rem;\n    flex: 1;\n  }\n\n  .label {\n    display: block;\n  }\n\n  .value {\n    white-space: nowrap;\n  }\n"])));var k,R=function(e){var n=e.language,t=e.currency,a=e.t,i={origin:{display:"Quebec",value:"f2m673"},destination:{display:"Montreal",value:"f25dvk"},outboundDate:"2022-07-29",adult:2},c=Object(r.useState)(i),o=Object(u.a)(c,2),l=o[0],m=o[1],v=Object(r.useState)(),g=Object(u.a)(v,2),h=g[0],f=g[1],y=Object(r.useRef)(0),N=function(){var e=Object(b.a)(Object(j.a)().mark((function e(n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,C();case 3:m(i);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(e,n){m(Object(s.a)(Object(s.a)({},l),{},Object(d.a)({},n,{display:e.target.value,value:l[n].value})))},C=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var a,r,i,c,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(void 0),a=new URLSearchParams({adult:"1",child:"0",senior:"0",lang:n,currency:t}),e.next=4,fetch("".concat(S).concat("v1","/search/").concat(l.origin.value,"/").concat(l.destination.value,"/").concat(l.outboundDate)+"?"+a);case 4:return r=e.sent,e.next=7,r.json();case 7:!0===(i=e.sent).complete?L(i):(c=!1,s=setInterval(Object(b.a)(Object(j.a)().mark((function e(){var n,t,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=a).append("index",y.current.toString()),c){e.next=12;break}return e.next=5,fetch("".concat(S).concat("v1","/search/").concat(l.origin.value,"/").concat(l.destination.value,"/").concat(l.outboundDate,"/poll")+"?"+n);case 5:return t=e.sent,e.next=8,t.json();case 8:!0===(r=e.sent).complete&&(E(r),c=!0),e.next=14;break;case 12:return clearInterval(s),e.abrupt("return");case 14:case"end":return e.stop()}}),e)}))),3e3));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var n=e.departures.map((function(e){var n={};return Object.entries(e).forEach((function(e){var t=Object(u.a)(e,2),a=t[0],r=t[1];n[x(a)]=r})),n}));f({departures:n,locations:null===e||void 0===e?void 0:e.locations})},E=function(e){var n=e.departures.map((function(e){var n={};return Object.entries(e).forEach((function(e){var t=Object(u.a)(e,2),a=t[0],r=t[1];n[x(a)]=r})),n}));f((function(t){return{departures:null!==t&&void 0!==t&&t.departures?t.departures.concat(n):n,locations:null!==t&&void 0!==t&&t.locations?null===t||void 0===t?void 0:t.locations.concat(null===e||void 0===e?void 0:e.locations):null===e||void 0===e?void 0:e.locations}}))};return Object(r.useEffect)((function(){y.current=(null===h||void 0===h?void 0:h.departures.length)||0}),[null===h||void 0===h?void 0:h.departures.length]),Object(p.jsxs)(U,{children:[Object(p.jsxs)("form",{className:"form",onSubmit:N,children:[Object(p.jsx)(D,{className:"field",field:"origin",handleChange:w,value:l.origin.display}),Object(p.jsx)(D,{className:"field",field:"destination",handleChange:w,value:l.destination.display}),Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("span",{className:"label",children:a.date}),Object(p.jsx)("span",{className:"value",children:"2022-07-29"})]}),Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("span",{className:"label",children:a.passenger}),Object(p.jsxs)("span",{className:"value",children:["1 ",a.passengerUnit]})]}),Object(p.jsx)("button",{type:"submit",children:"Submit"})]}),h?Object(p.jsx)(O,{departures:null===h||void 0===h?void 0:h.departures,locations:null===h||void 0===h?void 0:h.locations,language:n,t:a}):null]})},z=l.a.div(k||(k=Object(o.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px;\n\n  .box {\n    margin-right: 0.5rem;\n  }\n\n  .label {\n    margin-right: 0.5rem;\n  }\n"])));var A,I=function(e){e.setLanguage,e.setCurrency;var n=e.t;return Object(p.jsxs)(z,{children:[Object(p.jsxs)("div",{className:"box",children:[Object(p.jsxs)("label",{className:"label",children:[n.chooseCurrency,":"]}),Object(p.jsxs)("select",{name:"currency",id:"currency-select",onChange:function(n){e.setCurrency(n.target.value)},children:[Object(p.jsx)("option",{value:C.CAD,children:"CAD"}),Object(p.jsx)("option",{value:C.USD,children:"USD"}),Object(p.jsx)("option",{value:C.EUR,children:"EUR"})]})]}),Object(p.jsxs)("div",{className:"box",children:[Object(p.jsxs)("label",{className:"label",children:[n.chooseLanguage,":"]}),Object(p.jsxs)("select",{name:"language",id:"language-select",onChange:function(n){e.setLanguage(n.target.value)},children:[Object(p.jsx)("option",{value:w.EN,children:"English"}),Object(p.jsx)("option",{value:w.FR,children:"French"}),Object(p.jsx)("option",{value:w.ES,children:"Spanish"})]})]})]})},F={en:{title:"Find bus tickets for your trip",chooseCurrency:"Choose Currency",chooseLanguage:"Choose Language",origin:"Origin",destination:"Destination",date:"Date",passenger:"Passenger",submit:"Submit",passengerUnit:"passenger",resultList:"Result List"},es:{title:"Encuentra billetes de autob\xfas para tu viaje",chooseCurrency:"Elegir Moneda",chooseLanguage:"Elige lengua",origin:"Origen",destination:"Destino",date:"Fecha",passenger:"Pasajero",submit:"Enviar",passengerUnit:"pasajero",resultList:"lista de resultados"},fr:{title:"Trouvez des billets de bus pour votre voyage",chooseCurrency:"Choisir la devise",chooseLanguage:"Choisissez la langue",origin:"Origine",destination:"Destination",date:"Date",passenger:"Passag\xe8re",submit:"Nous faire parvenir",passengerUnit:"passag\xe8re",resultList:"liste de r\xe9sultats"}},P=l.a.div(A||(A=Object(o.a)(["\n  margin: 2rem;\n\n  @media (max-width: 768px) {\n    margin: 1rem;\n\n    .title {\n      padding: 1.5rem;\n    }\n  }\n"])));var T,M=function(){var e=Object(r.useState)(w.EN),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)(C.CAD),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(p.jsxs)(P,{children:[Object(p.jsx)("div",{className:"title",children:Object(p.jsx)("h1",{children:F[t].title})}),Object(p.jsx)(I,{setLanguage:a,setCurrency:o,t:F[t]}),Object(p.jsx)(R,{language:t,currency:s,t:F[t]})]})},J=l.a.div(T||(T=Object(o.a)(["\n  padding: 2rem 5rem;\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n"])));var _=function(){return Object(r.useEffect)((function(){window.process=Object(s.a)({},window.process)}),[]),Object(p.jsx)(J,{children:Object(p.jsx)(M,{})})};Object(c.createRoot)(document.getElementById("root")).render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(_,{})}))}},[[28,1,2]]]);
//# sourceMappingURL=main.1900bf73.chunk.js.map