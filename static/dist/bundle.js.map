{"version":3,"sources":["webpack:///webpack/bootstrap a5eb2fad4b4691aead57","webpack:///./entry.tsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///external \"$\"","webpack:///external \"_\""],"names":[],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a5eb2fad4b4691aead57\n **/","import * as React from \"react\"\nimport * as ReactDOM from \"react-dom\"\nimport * as $ from \"jquery\"\nimport * as _ from \"lodash\"\n\ninterface Lang{\n    Name: string;\n    Code: string;\n\n}\n\ninterface LabeldProps{\n    ID: string;\n    label: string\n}\n\nclass Labeled extends React.Component<LabeldProps, {}>{\n    render(){\n        let p = this.props\n        return(\n        <div className=\"form-group\">\n            <label htmlFor={p.ID} className=\"col-sm-2 control-label\">{p.label}</label>\n            <div className=\"col-sm-10\">\n                {this.props.children}\n            </div>\n        </div>)\n    }\n}\n\ninterface Location{\n    id: number;\n    name: string;\n}\n\ninterface  Departure{\n    departure_time: string;\n    arrival_time: string;\n    destination_location_id: number;\n    origin_location_id: number;\n    prices: {\n        total: number;\n    }\n}\n\ninterface ReturnData{\n    departures: Departure[];\n    locations: Location[];\n    complete: boolean;\n}\n\ninterface BusData{\n    returnData ?: ReturnData;\n    langs ?: Lang[];\n}\n\nclass BusBud extends React.Component<{}, BusData>{\n    constructor(props: any){\n        super(props)\n        this.state = {\n            returnData:{\n                departures:[],\n                locations:[],\n                complete: false,\n            },\n            langs: []\n        }\n    }\n\n    locationById = (id: number) => {\n        return _.find(this.state.returnData.locations, (l: Location) => l.id == id)\n    }\n    render(){\n        let data = [\n             [\"origin\", \"From\", <select className=\"form-control\" id=\"origin\">\n                                    <option value=\"dr5reg\">New York</option>\n                               </select>]\n            ,[\"destination\", \"To\",  <select className=\"form-control\" id=\"destination\">\n                                        <option value=\"f25dvk\">Montr√©al</option>\n                                    </select>]\n            ,[\"outbound_date\", \"Date\", <input type=\"text\" id=\"outbound_date\" className=\"form-control\"/>]\n            ,[\"adults\", \"Adults\", <input type=\"text\" id=\"adults\" className=\"form-control\" defaultValue=\"1\"/>]\n            ,[\"lang\", \"Language\", \n                                    <select className=\"form-control\" id=\"lang\">\n                                    {\n                                        this.state.langs.map( (lang: Lang, i: number) => \n                                                  <option value={lang.Code} key={i}>{lang.Name}</option>\n                                                 )\n                                    }\n                                    </select>\n            ]\n            ,[\"submit\", \"\", <button type=\"button\" className=\"btn btn-default\" onClick={this.handleClick}>Submit</button>]\n        ]\n        return <div>\n        <form className=\"form-horizontal\">\n            {data.map( (d:[string, string, any], i: number) => <Labeled ID={d[0]} label={d[1]} key={i}>{d[2]}</Labeled>)}\n        </form>\n\n        <table className=\"table table-striped table-bordered\">\n            <tbody>\n                <tr>\n                {'Departure Time,Arrival Time,Origin,Destination,Price'.split(',').map( (s, i) => <th key={i}>{s}</th>)}\n                </tr>\n                {\n                    this.state.returnData.departures.map( (dep: Departure, i: number) => <tr key={i}> \n                        <td>{dep.departure_time}</td>\n                        <td>{dep.arrival_time}</td>\n                        <td>{this.locationById(dep.origin_location_id).name}</td>\n                        <td>{this.locationById(dep.destination_location_id).name}</td>\n                        <td>{dep.prices.total}</td>\n                    </tr>)\n                }\n            </tbody>\n        </table>\n        </div>\n    }\n\n    componentDidMount(){\n        $('#outbound_date').datepicker({\n            dateFormat: 'yy-mm-dd',\n            defaultDate: +1\n        })\n        $.get('lang.json', (data)=>{\n            this.setState({ 'langs': data })\n        })\n    }\n\n    onSuccess = (url: string, params: string, start: number, firstTime: boolean) => \n         (data: ReturnData, textStatus: string, jqXHR: JQueryXHR) => {\n            let newState :BusData  = null\n             if(firstTime){\n                 newState = {returnData: data}\n             } else{\n                newState = _.cloneDeep(this.state)\n                Array.prototype.push.apply(newState.returnData.departures, data.departures)\n             }\n            if(!data.complete){\n                let idx = newState.returnData.departures.length \n                this.setState(newState)\n                this.request(url, params, idx, false)\n            } else{\n                this.setState(newState)\n            }\n        }\n\n    request =(url: string, params: string, start: number, firstTime: boolean) =>  {\n        let settings={\n            headers:{\n                Accept : 'application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/'\n            },\n            success: this.onSuccess(url, params, start, firstTime),\n            error: function (jqXHR: JQueryXHR, textStatus: string, errorThrown: string){\n                console.log(textStatus, errorThrown)\n            },\n            dateType: \"json\"\n        }\n\n        let url1 = firstTime ? url + params : url + '/poll' + params + '&index=' + start\n        $.ajax(url1, settings) \n    }\n\n    handleClick = (e: any) => {\n        let d: any = {}\n        'origin destination outbound_date adults lang'.split(' ').map(\n            (id: string, i: number, a: string[])=> d[id]=$('#'+id).val())\n        let url = `https://napi.busbud.com/x-departures/${d.origin}/${d.destination}/${d.outbound_date}`\n        let params = `?adult=${d.adults}&lang=${d.lang}`\n        this.request(url, params, 0, true)\n    }\n}\n\nReactDOM.render(\n    <BusBud />,\n    document.getElementById(\"react_div\")\n);\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./entry.tsx\n **/","module.exports = React;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = ReactDOM;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ReactDOM\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = $;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"$\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}