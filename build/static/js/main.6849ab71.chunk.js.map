{"version":3,"sources":["components/Location/index.js","helpers/translations.js","components/ListSchedules/index.js","components/App/index.js","index.js"],"names":["ListSchedules","params","className","city","locations","find","location","id","name","translations","en","title1","title2","subtitle","duration","fr","formatDate","string","date","split","time","reverse","join","departures","lang","map","departure","index","href","links","deeplink","src","alt","departure_time","origin_location_id","arrival_time","destination_location_id","prices","currency","total","getData","a","url","fetch","method","mode","cache","headers","referrerPolicy","response","json","getPlaceholderData","App","useState","setDepartures","setLocations","setLang","query","changeLang","fetchData","checkData","data","complete","length","setTimeout","newData","concat","console","log","useEffect","onClick","e","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6849ab71.chunk.js","sourcesContent":["import './index.scss';\n\nfunction ListSchedules(params) {\n\treturn (\n\t\t<span className=\"location\">\n\t\t\t{params.city} <br />\n\t\t\t<small>\n\t\t\t\t(\n\t\t\t\t\t{params.locations && params.locations.find((location) => {\n\t\t\t\t\t\treturn location.id === params.id;\n\t\t\t\t\t}).name}\n\n\t\t\t\t\t{!params.locations && '_________'}\n\t\t\t\t)\n\t\t\t</small>\n\t\t</span>\n\t);\n}\n\nexport default ListSchedules;\n","const translations = {\n\ten: {\n\t\ttitle1: 'Going to',\n\t\ttitle2: 'from Quebéc?',\n\t\tsubtitle: 'Bus Schedules',\n\t\tduration: 'Duration',\n\t},\n\tfr: {\n\t\ttitle1: 'Aller à',\n\t\ttitle2: 'du Quebéc?',\n\t\tsubtitle: 'Horaires des bus',\n\t\tduration: 'Durée',\n\t},\n};\n\nexport default translations;","import './ListSchedules.scss';\nimport Location from '../Location';\nimport translations from '../../helpers/translations';\n\nfunction ListSchedules(params) {\n\tconst departures = params.departures;\n\tconst locations = params.locations;\n\tconst lang = params.lang;\n\n\treturn (\n\t\t<ul className=\"list-schedules\">\n\t\t\t{departures.map((departure, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t<a className=\"card p-3 mb-3 text-left\" href={departure.links ? departure.links.deeplink : '#'}>\n\t\t\t\t\t\t\t<div className=\"d-flex justify-content-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"/img/icon-onbus.png\"\n\t\t\t\t\t\t\t\t\t\talt=\"OSHEAGA\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"icon\"\n\t\t\t\t\t\t\t\t\t/><br />\n\n\t\t\t\t\t\t\t\t\t<strong className=\"date\">{formatDate(departure.departure_time).date}</strong><br />\n\t\t\t\t\t\t\t\t\t<strong className=\"time\">{formatDate(departure.departure_time).time}</strong><br />\n\n\t\t\t\t\t\t\t\t\t<Location\n\t\t\t\t\t\t\t\t\t\tcity=\"Montréal\"\n\t\t\t\t\t\t\t\t\t\tid={departure.origin_location_id}\n\t\t\t\t\t\t\t\t\t\tlocations={locations}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"flex-grow-1 mr-2 ml-2 text-center\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"/img/shuttle.png\"\n\t\t\t\t\t\t\t\t\t\talt=\"OSHEAGA\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"shuttle\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<div className=\"arrow d-flex\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"line flex-grow-1\"></div>\n\t\t\t\t\t\t\t\t\t\t&gt;\n\n\t\t\t\t\t\t\t\t\t\t<span className=\"duration badge badge-pill\">\n\t\t\t\t\t\t\t\t\t\t\t{departure.duration} min\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"/img/icon-offbus.png\"\n\t\t\t\t\t\t\t\t\t\talt=\"OSHEAGA\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"icon\"\n\t\t\t\t\t\t\t\t\t/><br />\n\n\t\t\t\t\t\t\t\t\t<strong className=\"date\">{formatDate(departure.arrival_time).date}</strong><br />\n\t\t\t\t\t\t\t\t\t<strong className=\"time\">{formatDate(departure.arrival_time).time}</strong><br />\n\n\t\t\t\t\t\t\t\t\t<Location\n\t\t\t\t\t\t\t\t\t\tcity=\"Québec\"\n\t\t\t\t\t\t\t\t\t\tid={departure.destination_location_id}\n\t\t\t\t\t\t\t\t\t\tlocations={locations}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"d-flex justify-content-between flex-row align-items-baseline\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"duration\">{translations[lang].duration}: {departure.duration} min</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<h4 className=\"mb-0\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-success\">\n\t\t\t\t\t\t\t\t\t\t{departure.prices.currency} {typeof departure.prices.total === 'number' ? departure.prices.total / 100 : departure.prices.total}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t)\n\t\t\t})}\n\t\t</ul>\n\t);\n}\n\nfunction formatDate(string) {\n\tlet date = string.split('T')[0];\n\tlet time = string.split('T')[1];\n\n\tdate = date.split('-').reverse().join('/');\n\n\ttime = time.split(':');\n\ttime = time[0] + ':' + time[1];\n\n\treturn {\n\t\tdate,\n\t\ttime,\n\t};\n}\n\nexport default ListSchedules;\n","import React, { useState, useEffect } from 'react';\nimport './App.scss';\nimport ListSchedules from '../ListSchedules';\nimport translations from '../../helpers/translations';\n\nfunction App() {\n\tconst [departures, setDepartures] = useState([\n\t\tgetPlaceholderData(),\n\t\tgetPlaceholderData(),\n\t\tgetPlaceholderData(),\n\t\tgetPlaceholderData(),\n\t\tgetPlaceholderData(),\n\t]);\n\n\tconst [locations, setLocations] = useState();\n\tconst [lang, setLang] = useState('en');\n\n\tconst url = 'https://napi.busbud.com/x-departures/f2m673/f25dvk/2020-12-01';\n\tconst query = `?adult=1&child=0&senior=0&lang=${lang}&currency=CAD`;\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, []);\n\n\tfunction changeLang(lang) {\n\t\tsetLang(lang);\n\t\tfetchData();\n\t}\n\n\tfunction checkData(data) {\n\t\tif (!data.complete) {\n\t\t\tconst length = data.departures.length;\n\n\t\t\tsetTimeout(async () => {\n\t\t\t\tconst newData = await getData(url + '/poll' + query + '&index=' + length);\n\n\t\t\t\tsetDepartures(departures.concat(newData.departures));\n\t\t\t\tsetLocations(locations.concat(newData.locations));\n\n\t\t\t\tcheckData(newData);\n\t\t\t}, 2000);\n\t\t}\n\t}\n\n\tasync function fetchData() {\n\t\tconst data = await getData(url + query);\n\n\t\tconsole.log('data', data);\n\n\t\tsetDepartures(data.departures);\n\t\tsetLocations(data.locations);\n\n\t\tcheckData(data);\n\t}\n\n\treturn (\n\t\t<div className=\"app text-center mt-5 mb-5\">\n\t\t\t<header className=\"app-header\">\n\t\t\t\t<h1 className=\"title\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t{translations[lang].title1}\n\t\t\t\t\t</div>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"https://cloud.githubusercontent.com/assets/1574577/12971188/13471bd0-d066-11e5-8729-f0ca5375752e.png\"\n\t\t\t\t\t\talt=\"OSHEAGA\"\n\t\t\t\t\t\tclassName=\"logo\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div>{translations[lang].title2}</div>\n\t\t\t\t</h1>\n\t\t\t</header>\n\n\t\t\t<button className=\"btn\" onClick={(e) => changeLang('en')}>EN</button> | {/* */}\n\t\t\t<button className=\"btn\" onClick={(e) => changeLang('fr')}>FR</button>\n\n\t\t\t<h2 className=\"mt-5\">{translations[lang].subtitle}</h2>\n\n\t\t\t<ListSchedules\n\t\t\t\tdepartures={departures}\n\t\t\t\tlocations={locations}\n\t\t\t\tlang={lang}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nasync function getData(url = '') {\n\tconst response = await fetch(url, {\n\t\tmethod: 'GET',\n\t\tmode: 'cors',\n\t\tcache: 'no-cache',\n\t\theaders: {\n\t\t\t'X-Busbud-Token': 'PARTNER_BaASYYHxTxuOINEOMWq5GA',\n\t\t\t'Accept': 'application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/',\n\t\t},\n\t\treferrerPolicy: 'no-referrer',\n\t});\n\n\treturn response.json();\n}\n\nfunction getPlaceholderData() {\n\treturn {\n\t\tdeparture_time: getPlaceholderDate(),\n\t\tarrival_time: getPlaceholderDate(),\n\t\tprices: {\n\t\t\ttotal: '_.__',\n\t\t\tcurrency: '___',\n\t\t},\n\t\tduration: '__',\n\t};\n}\n\nfunction getPlaceholderDate() {\n\treturn '____-__-__T_:_:__';\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './components/App/';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}