(this.webpackJsonposheaga_quebec_schedules=this.webpackJsonposheaga_quebec_schedules||[]).push([[0],[,,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(1),r=c.n(n),a=c(6),i=c.n(a),l=(c(12),c(13),c(2)),o=c.n(l),u=c(3),d=c(4);c(15),c(16),c(17);var j=function(e){return Object(s.jsxs)("span",{className:"location",children:[e.city," ",Object(s.jsx)("br",{}),Object(s.jsxs)("small",{children:["(",e.locations&&e.locations.find((function(t){return t.id===e.id})).name,!e.locations&&"_________",")"]})]})},b={en:{title1:"Going to",title2:"from Queb\xe9c?",subtitle:"Bus Schedules",duration:"Duration"},fr:{title1:"Aller \xe0",title2:"du Queb\xe9c?",subtitle:"Horaires des bus",duration:"Dur\xe9e"}};function m(e){var t=e.split("T")[0],c=e.split("T")[1];return{date:t=t.split("-").reverse().join("/"),time:c=(c=c.split(":"))[0]+":"+c[1]}}var p=function(e){var t=e.departures,c=e.locations,n=e.lang;return Object(s.jsx)("ul",{className:"list-schedules",children:t.map((function(e,t){return Object(s.jsx)("li",{children:Object(s.jsxs)("a",{className:"card p-3 mb-3 text-left",href:e.links?e.links.deeplink:"#",children:[Object(s.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:"/img/icon-onbus.png",alt:"OSHEAGA",className:"icon"}),Object(s.jsx)("br",{}),Object(s.jsx)("strong",{className:"date",children:m(e.departure_time).date}),Object(s.jsx)("br",{}),Object(s.jsx)("strong",{className:"time",children:m(e.departure_time).time}),Object(s.jsx)("br",{}),Object(s.jsx)(j,{city:"Montr\xe9al",id:e.origin_location_id,locations:c})]}),Object(s.jsxs)("div",{className:"flex-grow-1 mr-2 ml-2 text-center",children:[Object(s.jsx)("img",{src:"/img/shuttle.png",alt:"OSHEAGA",className:"shuttle"}),Object(s.jsxs)("div",{className:"arrow d-flex",children:[Object(s.jsx)("div",{className:"line flex-grow-1"}),">",Object(s.jsxs)("span",{className:"duration badge badge-pill",children:[e.duration," min"]})]})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:"/img/icon-offbus.png",alt:"OSHEAGA",className:"icon"}),Object(s.jsx)("br",{}),Object(s.jsx)("strong",{className:"date",children:m(e.arrival_time).date}),Object(s.jsx)("br",{}),Object(s.jsx)("strong",{className:"time",children:m(e.arrival_time).time}),Object(s.jsx)("br",{}),Object(s.jsx)(j,{city:"Qu\xe9bec",id:e.destination_location_id,locations:c})]})]}),Object(s.jsxs)("div",{className:"d-flex justify-content-between flex-row align-items-baseline",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"duration",children:[b[n].duration,": ",e.duration," min"]})}),Object(s.jsx)("h4",{className:"mb-0",children:Object(s.jsxs)("span",{className:"text-success",children:[e.prices.currency," ","number"===typeof e.prices.total?e.prices.total/100:e.prices.total]})})]})]})},t)}))})};function h(){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(o.a.mark((function e(){var t,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",e.next=3,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"X-Busbud-Token":"PARTNER_BaASYYHxTxuOINEOMWq5GA",Accept:"application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/"},referrerPolicy:"no-referrer"});case 3:return c=e.sent,e.abrupt("return",c.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return{departure_time:"____-__-__T_:_:__",arrival_time:"____-__-__T_:_:__",prices:{total:"_.__",currency:"___"},duration:"__"}}var f=function(){var e=Object(n.useState)([O(),O(),O(),O(),O()]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(),i=Object(d.a)(a,2),l=i[0],j=i[1],m=Object(n.useState)("en"),x=Object(d.a)(m,2),f=x[0],_=x[1],v="https://napi.busbud.com/x-departures/f2m673/f25dvk/2020-12-01",g="?adult=4&child=0&senior=0&lang=".concat(f,"&currency=CAD");function N(e){_(e),w()}function y(e){if(!e.complete){var t=e.departures.length;setTimeout(Object(u.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(v+"/poll"+g+"&index="+t);case 2:s=e.sent,r(c.concat(s.departures)),j(l.concat(s.locations)),y(s);case 6:case"end":return e.stop()}}),e)}))),2e3)}}function w(){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(v+g);case 2:t=e.sent,console.log("data",t),r(t.departures),j(t.locations),y(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){w()}),[]),Object(s.jsxs)("div",{className:"app text-center mt-5 mb-5",children:[Object(s.jsx)("header",{className:"app-header",children:Object(s.jsxs)("h1",{className:"title",children:[Object(s.jsx)("div",{className:"mb-2",children:b[f].title1}),Object(s.jsx)("img",{src:"https://cloud.githubusercontent.com/assets/1574577/12971188/13471bd0-d066-11e5-8729-f0ca5375752e.png",alt:"OSHEAGA",className:"logo"}),Object(s.jsx)("div",{children:b[f].title2})]})}),Object(s.jsx)("button",{className:"btn",onClick:function(e){return N("en")},children:"EN"})," | ",Object(s.jsx)("button",{className:"btn",onClick:function(e){return N("fr")},children:"FR"}),Object(s.jsx)("h2",{className:"mt-5",children:b[f].subtitle}),Object(s.jsx)(p,{departures:c,locations:l,lang:f})]})};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(f,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.d409114f.chunk.js.map